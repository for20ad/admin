function modal(t){return $.cModal(t)}(function(t){t.cModal=function(n){var o,e={type:"default",title:null,text:null,size:"normal",buttons:[{text:"확인",val:!0,onClick:function(t){return!0}}],center:!0,autoclose:!1,callback:null,onShow:null,animate:!0,closeClick:!0,closable:!0,theme:"default",background:"rgba(0,0,0,0.35)",zIndex:1050,buttonText:{ok:"확인",yes:"예",cancel:"취소"},template:'<div class="modal-box"><div class="modal-inner"><div class="modal-title"><a class="modal-close-btn"></a></div><div class="modal-text"></div><div class="modal-buttons"></div></div></div>',_classes:{box:"#modal-window .modal-box",boxInner:"#modal-window .modal-inner",title:"#modal-window .modal-title",content:"#modal-window .modal-text",buttons:"#modal-window .modal-buttons",closebtn:"#modal-window .modal-close-btn"}},a=(n=t.extend({},e,n),t("<div id='modal-window' />").hide()),l=n._classes.box,s=a.append(n.template),i={init:function(){t("#modal-window").remove(),i._setStyle(),i._modalShow(),i._modalConent(),a.on("click","a.modal-btn",function(n){i._modalBtn(t(this))}).on("click",n._classes.closebtn,function(t){i._modalHide()}).click(function(t){n.closeClick&&"modal-window"==t.target.id&&i._modalHide()}),t(window).bind("keyup",i._keyUpF).resize(function(){var t=n.animate;n.animate=!1,i._position(),n.animate=t})},_setStyle:function(){a.css({position:"fixed",width:"100%",height:"100%",top:"0",left:"0","z-index":n.zIndex,overflow:"auto"}),a.find(n._classes.box).css({position:"absolute"})},_keyUpF:function(t){switch(t.keyCode){case 13:if(s.find("input:not(.modal-prompt-input),textarea").is(":focus"))return!1;i._modalBtn(a.find(n._classes.buttons+" a.modal-btn"+(void 0!==i.btnForEKey&&a.find(n._classes.buttons+" a.modal-btn:eq("+i.btnForEKey+")").size()>0?":eq("+i.btnForEKey+")":":last-child")));break;case 27:i._modalHide()}},_modalShow:function(){t("body").css({overflow:"hidden",width:t("body").innerWidth()}).append(s),null!=n.onShow&&n.onShow(i.actions)},_modalHide:function(e){if(!1===n.closable)return!1;o=void 0!==o&&o;var s=function(){if(null==n.callback||"function"!=typeof n.callback||0!=n.callback(o,a,i.actions)){a.fadeOut(200,function(){t(this).remove(),t("body").css({overflow:"",width:""})});var e=100*parseFloat(t(l).css("top"))/parseFloat(t(l).parent().css("height"));t(l).stop(!0,!0).animate({top:e+(n.animate?3:0)+"%"},"fast")}};e?setTimeout(function(){s()},e):s(),t(window).unbind("keyup",i._keyUpF)},_modalConent:function(){var o=n._classes.title,e=n._classes.content,s=n._classes.buttons,d=n.buttonText,c=["alert","confirm","prompt"],u=["xenon","atlant","reseted"];if(-1==t.inArray(n.type,c)&&"default"!=n.type&&t(l).addClass("modal-type-"+n.type),n.size&&null!=n.size?t(l).addClass("modal-size-"+n.size):t(l).addClass("modal-size-normal"),n.theme&&null!=n.theme&&"default"!=n.theme&&t(l).addClass((-1==t.inArray(n.theme,u)?"":"modal-theme-")+n.theme),n.background&&null!=n.background&&a.css("background-color",n.background),n.title||null!=n.title?t(o).prepend("<h3>"+n.title+"</h3>"):t(o).remove(),"prompt"==n.type&&(n.text=(null!=n.text?n.text:"")+'<input type="text" name="modal-prompt-input" class="modal-prompt-input" autocomplete="off" autofocus="on" />'),t(e).html(n.text),n.buttons||null!=n.buttons){var r="";switch(n.type){case"alert":r='<a class="modal-btn'+(n.buttons[0].addClass?" "+n.buttons[0].addClass:"")+'">'+d.ok+"</a>";break;case"confirm":r='<a class="modal-btn'+(n.buttons[0].addClass?" "+n.buttons[0].addClass:"")+'">'+d.cancel+'</a><a class="modal-btn '+(n.buttons[1]&&n.buttons[1].addClass?" "+n.buttons[1].addClass:"btn-light-blue")+'">'+d.yes+"</a>";break;case"prompt":r='<a class="modal-btn'+(n.buttons[0].addClass?" "+n.buttons[0].addClass:"")+'">'+d.cancel+'</a><a class="modal-btn '+(n.buttons[1]&&n.buttons[1].addClass?" "+n.buttons[1].addClass:"btn-light-blue")+'">'+d.ok+"</a>";break;default:n.buttons.length>0&&t.isArray(n.buttons)?t.each(n.buttons,function(t,n){var o=n.addClass&&void 0!==n.addClass?" "+n.addClass:"";r+='<a class="modal-btn'+o+'">'+n.text+"</a>",n.eKey&&(i.btnForEKey=t)}):r+='<a class="modal-btn">'+d.ok+"</a>"}t(s).html(r)}else t(s).remove();if("prompt"==n.type&&$(".modal-prompt-input").focus(),n.autoclose){var m=n.buttons||null!=n.buttons?32*t(e).text().length:3e3;i._modalHide(m<3e3?3e3:m)}a.fadeIn(200),i._position()},_position:function(){var o,e,a;n.center?(o={top:t(window).height()<t(l).outerHeight()?1:50,left:50,marginTop:t(window).height()<t(l).outerHeight()?0:-t(l).outerHeight()/2,marginLeft:-t(l).outerWidth()/2},e={top:o.top-(n.animate?3:0)+"%",left:o.left+"%","margin-top":o.marginTop,"margin-left":o.marginLeft},a={top:o.top+"%"}):(o={top:t(window).height()<t(l).outerHeight()?1:10,left:50,marginTop:0,marginLeft:-t(l).outerWidth()/2},e={top:o.top-(n.animate?3:0)+"%",left:o.left+"%","margin-top":o.marginTop,"margin-left":o.marginLeft},a={top:o.top+"%"}),t(l).css(e).stop(!0,!0).animate(a,"fast")},_modalBtn:function(e){var l=!1,s=n.type,d=e.index(),c=n.buttons[d];if(t.inArray(s,["alert","confirm","prompt"])>-1)o=l=1==d,"prompt"==s&&(o=l=!(!l||a.find("input.modal-prompt-input").size()>0==0)&&a.find("input.modal-prompt-input").val()),i._modalHide();else{if(e.hasClass("btn-disabled"))return!1;o=l=!c||!c.val||c.val,c.onClick&&!c.onClick(t.extend({val:l,bObj:e,bOpts:c},i.actions))||i._modalHide()}o=l},actions:{html:a,close:function(){i._modalHide()},getModal:function(){return a},getBox:function(){return a.find(n._classes.box)},getInner:function(){return a.find(n._classes.boxInner)},getTitle:function(){return a.find(n._classes.title)},getContet:function(){return a.find(n._classes.content)},getButtons:function(){return a.find(n._classes.buttons).find("a")},setTitle:function(t){return a.find(n._classes.title+" h3").html(t),a.find(n._classes.title+" h3").size()>0},setContent:function(t){return a.find(n._classes.content).html(t),a.find(n._classes.content).size()>0}}};return i.init(),i.actions}})(jQuery);